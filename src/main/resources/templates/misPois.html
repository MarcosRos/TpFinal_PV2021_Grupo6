<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link th:rel="stylesheet" type="text/css" th:href="@{/css/miestilo2.css}">
<link th:rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/4.5.0/css/bootstrap.min.css}">
<link th:rel="stylesheet" th:href="@{/webjars/font-awesome/5.11.2/css/all.css} " />
<title>Tus PoIs</title>
</head>
<body class="body-tur">
	<div th:insert="layouts/header :: header"></div>
		<h1>LISTADO DE TUS POIS</h1>
		<div class="container">

			<tr th:each="poi : ${pois}"
					th:if="${poi.turistaCreador == #authentication.getPrincipal().getUsername()}">
					
				<div class="card">
				
					<img th:src="*{'data:;base64,'+poi.imagen}" class="card-img">
					
					<h4>
						<td th:text="${poi.nombre}"></td>
					</h4>
					
					<p>
						<td th:text="${poi.descripcion}"></td>
					</p>
					
					<p>
						<a href="#" th:href="@{'/poi/editar/'+${poi.idPOI}}"> 
							<i class="fa fa-edit"></i>
						</a>
						
						<a href="#" th:href="'javascript:confirmarEliminar(\''+${poi.idPOI}+'\');'">
							<i class="fa fa-trash-alt"></i>
						</a>
					</p>
<!-- 					<a href="#" th:href="@{'/poi/editar/'+${poi.idPOI}}">Editar</a> -->
					
				</div>
				
			</tr>
		</div>

	<!--Modal Eliminar--> 
		<div class="modal fade" id="modalEliminar" tabindex="-1" role="dialog"
												aria-labelledby="eliminarModal" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="eliminarModalTitulo">Â¿Desea borrar este POI?</h5>
						<button type="button" class="close" data-dismiss="modal"
																	aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<h6>Borrar POI</h6>
					</div>
					
					<input type="hidden" id="identificadorPoi" name="POIId" />
					
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
											data-dismiss="modal">Cerrar</button>
						<button type="button" class="btn btn-primary"
											th:onclick="eliminarPoi()">Borrar</button>
					</div>
				</div>
			</div>
		</div>

	<script type="text/javascript">
		function confirmarEliminar(id) {
			$('#modalEliminar').modal('show');
			$("#identificadorPoi").val(id);
		}

		function eliminarPoi() {
			var id = $("#identificadorPoi").val();
			window.location = "eliminarPoi/" + id;
		}
	</script>

	<script th:src="@{/webjars/jquery/3.5.1/jquery.min.js}"
		type="text/javascript" src="webjars/jquery/3.5.1/jquery.min.js"></script>
	<script th:src="@{/webjars/popper.js/1.16.0/popper.min.js}"
		type="text/javascript" src="webjars/popper.js/1.16.0/popper.min.js"></script>
	<script th:src="@{/webjars/bootstrap/4.5.0/js/bootstrap.min.js}"
		type="text/javascript"
		src="webjars/bootstrap/4.5.0/js/bootstrap.min.js"></script>

	<div th:insert="layouts/footer :: footer"></div>
</body>
</html>